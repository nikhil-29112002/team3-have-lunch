name: 'build and test'
on: 
 pull_request:
   branches:
   - main 
 workflow_dispatch:

jobs:
 build-frontend:
  runs-on: "ubuntu-latest"
  name: "Frontend Build"
  steps:
  - name: "Checkout branch"
    uses: actions/checkout@v4
  
  - name: "Setup Node"
    uses: actions/setup-node@v3
    with:
     node-version: "20.11.1"
     
  - name: "Install Dependencies"
    run: |
      cd frontend
      npm ci
      
  - name: "Test for frontend"
    run: |
      cd frontend
      npm test
  
 build-backend:
  runs-on: "ubuntu-latest"
  name: "Backend build"
  steps:
  - name: "Checkout branch"
    uses: actions/checkout@v4
  
  - name: "Setup JDK"
    uses: actions/setup-java@v3
    with:
      java-version: '21'
      distribution: 'temurin'
      architecture: 'x64'

  - name: "Test for backend"
    run: |
      cd backend
      ./gradlew test
